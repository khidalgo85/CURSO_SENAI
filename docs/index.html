<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Curso de Gen√¥mica e Metagen√¥mica</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dra. Kelly Hidalgo" />
    <script src="index_files/header-attrs/header-attrs.js"></script>
    <script src="index_files/clipboard/clipboard.min.js"></script>
    <link href="index_files/shareon/shareon.min.css" rel="stylesheet" />
    <script src="index_files/shareon/shareon.min.js"></script>
    <link href="index_files/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="index_files/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="index_files/font-awesome/css/all.min.css" rel="stylesheet" />
    <link href="index_files/font-awesome/css/v4-shims.min.css" rel="stylesheet" />
    <link href="index_files/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-progressBar/progress-bar.js"></script>
    <link href="index_files/tile-view/tile-view.css" rel="stylesheet" />
    <script src="index_files/tile-view/tile-view.js"></script>
    <script type="application/json" id="xaringanExtra-editable-docid">{"id":"xe1547b19bed42acb0d40f38bbb1858c","expires":1}</script>
    <script src="index_files/himalaya/himalaya.js"></script>
    <script src="index_files/js-cookie/js.cookie.js"></script>
    <link href="index_files/editable/editable.css" rel="stylesheet" />
    <script src="index_files/editable/editable.js"></script>
    <script src="index_files/fabric/fabric.min.js"></script>
    <link href="index_files/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <link href="index_files/panelset/panelset.css" rel="stylesheet" />
    <script src="index_files/panelset/panelset.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Curso de Gen√¥mica e Metagen√¥mica
]
.subtitle[
## Linhas de Comando e Ferramentas On-Line
]
.author[
### Dra. Kelly Hidalgo
]
.institute[
### SENAI
]
.date[
### Nov 2023 - Jan 2024
]

---




&lt;div style = "position:fixed; visibility: hidden"&gt;
`$$\require{color}\definecolor{yellow}{rgb}{1, 0.8, 0.16078431372549}$$`
`$$\require{color}\definecolor{orange}{rgb}{0.96078431372549, 0.525490196078431, 0.203921568627451}$$`
`$$\require{color}\definecolor{green}{rgb}{0, 0.474509803921569, 0.396078431372549}$$`
`$$\require{color}\definecolor{blue}{rgb}{0, 0, 205}$$`
`$$\require{color}\definecolor{red}{rgb}{255, 0, 0}$$`
&lt;/div&gt;

&lt;script type="text/x-mathjax-config"&gt;
MathJax.Hub.Config({
  TeX: {
    Macros: {
      yellow: ["{\\color{yellow}{#1}}", 1],
      orange: ["{\\color{orange}{#1}}", 1],
      green: ["{\\color{green}{#1}}", 1],
      blue: ["{\\color{blue}{#1}}", 1],
      red: ["{\\color{red}{#1}}", 1]
    },
    loader: {load: ['[tex]/color']},
    tex: {packages: {'[+]': ['color']}}
  }
});
&lt;/script&gt;

&lt;style&gt;
.yellow {color: #FFCC29;}
.orange {color: #F58634;}
.green {color: #007965;}
.blue {color: #0000CD;}
.red {color: #FF0000;}
&lt;/style&gt;






&lt;style type="text/css"&gt;
.huge .remark-code { /*Change made here*/
  font-size: 150% !important;
}
.tiny .remark-code { /*Change made here*/
  font-size: 60% !important;
}
&lt;/style&gt;











<style>.xe__progress-bar__container {
  top:0;
  opacity: 1;
  position:absolute;
  right:0;
  left: 0;
}
.xe__progress-bar {
  height: 0.25em;
  background-color: #0051BA;
  width: calc(var(--slide-current) / var(--slide-total) * 100%);
}
.remark-visible .xe__progress-bar {
  animation: xe__progress-bar__wipe 200ms forwards;
  animation-timing-function: cubic-bezier(.86,0,.07,1);
}
@keyframes xe__progress-bar__wipe {
  0% { width: calc(var(--slide-previous) / var(--slide-total) * 100%); }
  100% { width: calc(var(--slide-current) / var(--slide-total) * 100%); }
}</style>











---
## Um pouco sobre mim

* Nome: Kelly Hidalgo Martinez

* üá®üá¥ Sou da Col√¥mbia üá®üá¥

* Sou microbiologista 

* Doutora em gen√©tica e biologia molecular da Unicamp

* Grupo de Ecologia Microbiana e Multi-√¥micas da Divis√£o de Recursos Microbianos do CPQBA- UNICAMP

* √Årea de pesquisa: Microbiomas de √°reas contaminadas com petr√≥leo e derivados

&lt;img src="03.Images/ORCID.png" width="30%" style="display: block; margin: auto 0 auto auto;" /&gt;
---

## Conte√∫do Program√°tico

**1. Sequenciamento de √°cidos nucleicos** 

|   1.1. Hist√≥rico

|   1.2. Sanger

|   1.3. Next Generation Sequence

|   1.4. Sequenciamento por s√≠ntese

|   1.5. Detec√ß√£o de √≠ons de hidrog√™nio

|   1.6. Sequenciamento por nanoporos

|   1.7. Estrat√©gia de Sequenciamento foco: Gen√¥mica e Metagen√¥mica
---

## Conte√∫do Program√°tico

**2. No√ß√µes de linguagem de programa√ß√£o**

|   2.1. Sistema Operacional - GNU/LINUX

|       2.1.1. Linha de comando (Comandos b√°sicos)

|       2.1.2. Instala√ß√£o de ferramentas con Anaconda/Miniconda

---

## Conte√∫do Program√°tico

**3. Estrat√©gias de An√°lises Gen√≥micas ‚Äì Command Line Interface (CLI)**

|   3.1. Controle de Qualidade

|   3.2. Montagem de novo

|   3.3. Avalia√ß√£o da Montagem

|   3.4. Anota√ß√£o Taxon√¥mica

|   3.5. Anota√ß√£o Funcional

|   3.6. Predi√ß√£o de ORFs

|   3.7. Atribui√ß√£o Funcional das ORFs

|   3.8. Aplica√ß√µes

---

## Conte√∫do Program√°tico

**4. Estrat√©gias de An√°lises Gen√≥micas ‚Äì Graphical User Interface (GUI)**

|   4.1. KBase

|       4.1.2. Controle de qualidade

|       4.1.3. Trimagem e Filtragem de sequ√™ncias

|       4.1.4. Motagem de novo

|       4.1.5. Avalia√ß√£o de montagem

|       4.1.6. Anota√ß√£o taxon√¥mica

|       4.1.7. Anota√ß√£o funcional

|   4.2. Introdu√ß√£o a RAPT

|       4.2.1. Montagem de novo com Skesa

|       4.2.2. Anota√ß√£o Taxon√¥mica (ANI)

|       4.2.3. Anota√ß√£o Funcional (PGAP)

---

## Conte√∫do Program√°tico

**5. Estrat√©gias de An√°lises Metagen√≥micas ‚Äì Command Line Interface (CLI)**

|   5.1. Avalia√ß√£o da qualidade

|   5.2. Cobertura dos Metagenoma

|   5.3. An√°lise de Dist√¢ncias MinHash (abordagem de co-assembly)

|   5.4. Montagem dos Metagenomas

|   5.5. Controle de Qualidade das montagens

|   5.6. Predi√ß√£o das ORFs (Open Reading Frame)

|   5.7. Anota√ß√£o Funcional

|   5.8. Anota√ß√£o Taxon√¥mica

|   5.9. Mapeamento

---
## Conte√∫do Program√°tico

|   5.10. Recupera√ß√£o de MAGs (Metagenome Assembled Genomes)

|   5.11. An√°lises Downstream

|       5.11.1. R Software

|       5.11.2. RawGraphs.io

**6. Estrat√©gias de An√°lises Metagen√≥micas ‚Äì Graphical User Interface (GUI)**

|   6.1. MGRAST

|   6.2. Kbase

**7. Bonus: Python**

|   7.1. Conceitos b√°sicos

---
class: center, middle, inverse

.huge[
# Antes de come√ßar lembremos juntos conceitos b√°sicos
]

---
## Lembrando a estrutura do DNA (√Åcido desoxirribonucleico)

* √â a mol√©cula que carrega toda a informa√ß√£o gen√©tica dos organismos.

* Tem uma estrutura qu√≠mica simples

.center[
![dna](https://media.giphy.com/media/YRzQnWzbn4WIxd3ZYx/giphy.gif)
]
---
## Estrutura do DNA

&lt;img src="03.Images/DNA.png" width="70%" style="display: block; margin: auto;" /&gt;

* A mol√©cula de DNA est√° composta por nucleot√≠deos

---
## Estrutura do DNA

* Os nucleot√≠deos tamb√©m s√£o conhecidos como dNTPs - desoxinucleot√≠deo.

* O grupo fosfato d√° o carater negativo √† mol√©cula de DNA.

* O a√ß√∫car √© uma pentosa (cinco carbonos), chamado desoxirribose, pela falta do oxig√™nio no carbono 2.

&lt;img src="03.Images/dntps1.png" width="50%" style="display: block; margin: auto;" /&gt;

&lt;img src="03.Images/ribosa.png" width="50%" style="display: block; margin: auto;" /&gt;

---
## Estrutura do DNA

* As bases d√£o nome aos nucleot√≠deos.

* Existem dois tipos de bases nitrogenadas, purinas e pirimidinas.

&lt;img src="03.Images/bases.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Estrutura do DNA

* As bases nitrogenadas s√£o complementares e se ligam por pontes de hidrog√™nio (uni√£o da dupla fita).

* Sempre se d√° a uni√£o entre A e T por duas pontes, e entre G e C por tr√™s pontes. 

* A liga√ß√£o GC √© mais forte.
&lt;img src="03.Images/GCAT.png" width="100%" style="display: block; margin: auto;" /&gt;
---

## Estrutura do DNA

* A polimeriza√ß√£o da fita de DNA, se d√° por uma liga√ß√£o 3'-5' fosfodi√©ster.

&lt;img src="03.Images/fita.png" width="70%" style="display: block; margin: auto;" /&gt;
---
## Estrutura do DNA

* Dupla fita, antiparalela.

&lt;img src="03.Images/duplafita.png" width="55%" style="display: block; margin: auto;" /&gt;
---

## Dogma Central da Biologia Molecular

.center[
![dna](https://media.giphy.com/media/mRI1hW0ZBVUly/giphy.gif)
]

* O DNA se duplica, sempre em sentido 5' --&gt; 3'

* O DNA √© transcrito em RNA mensageiro e estes traduzidos em prote√≠nas
---
class: center, middle, inverse

.huge[
# Agora sim entrando no nosso curso...
]
---
class: inverse, center, middle

.huge[
# 1. Sequenciamento de DNA e RNA
]
---

## O que √© sequenciamento?

√â a utiliza√ß√£o de m√©todos bioqu√≠micos para determinar a ordem dos nucleotideos em uma mol√©cula de DNA ou RNA. Assim, ser√° poss√≠vel conhecer a sequ√™ncia em que as quatro bases nucleot√≠dicas ocorrem.

.center[
![dna](https://media.giphy.com/media/YlmI36YAWe7KScC7hK/giphy.gif)
]

---

class: center, middle, inverse

.huge[
# Um pouco de hist√≥ria
]

---

## A viagem pela hist√≥ria do sequenciamento do DNA

&lt;img src="03.Images/history_1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## A viagem pela hist√≥ria do sequenciamento do DNA

&lt;img src="03.Images/history_2.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## A viagem pela hist√≥ria do sequenciamento do DNA

&lt;img src="03.Images/history_3.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## A viagem pela hist√≥ria do sequenciamento do DNA

&lt;img src="03.Images/history_4.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## A viagem pela hist√≥ria do sequenciamento do DNA

&lt;img src="03.Images/history_5.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## A viagem pela hist√≥ria do sequenciamento do DNA

&lt;img src="03.Images/history_6.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## A viagem pela hist√≥ria do sequenciamento do DNA

&lt;img src="03.Images/history_7.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## A viagem pela hist√≥ria do sequenciamento do DNA

&lt;img src="03.Images/history_8.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Evolu√ß√£o do custo do sequenciamento do genoma humano

&lt;img src="03.Images/cpg.png" width="100%" style="display: block; margin: auto;" /&gt;
.tiny[
* Fonte: National Human Genome Research Institute
]

---
## Outros dados interessantes...

&lt;img src="03.Images/costs.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Plataformas de sequenciamento

&lt;img src="03.Images/plataformas.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Primeira Gera√ß√£o: T√©cnica Sanger 

&lt;img src="03.Images/sanger2.jpg" width="60%" style="display: block; margin: auto;" /&gt;

* M√©todo de terminaliza√ß√£o de cadeia

* Para isolados (n√£o amostras mistas)

* Fragmentos de ~800 bp (F/R at√© ~1500 bp)

* Primeira m√°quina da Applied Biosystems (1986)

* Usada por Craig Venter para acelarar o Projeto Genoma Humano

---
## Primeira Gera√ß√£o: T√©cnica Sanger 

* A rea√ß√£o de sequenciamento √© muito similar a uma PCR

&lt;img src="03.Images/sanger3.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Primeira Gera√ß√£o: T√©cnica Sanger 

### dNTPs vs ddNTPs

* Ausen√ßa de um grupo 3'-hidroxil

&lt;img src="03.Images/dntps2.png" width="80%" style="display: block; margin: auto;" /&gt;
---
## Primeira Gera√ß√£o: T√©cnica Sanger 

### ddNTPs

* N√£o forma pontes fosfodi√©ster com outros dNTPs ou ddNTPs

&lt;img src="03.Images/dntps3.png" width="70%" style="display: block; margin: auto;" /&gt;
---
## Primeria Gera√ß√£o: T√©cnica Sanger

* Cada ddNTP √© marcado com um fluor√≥foro diferente e emitir√° uma "cor" diferente quando exitado

&lt;img src="03.Images/dntps4.png" width="60%" style="display: block; margin: auto;" /&gt;

---
## Primeria Gera√ß√£o: T√©cnica Sanger



&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/0ZVdROXCsi0?si=Wc9ryeKQvDwBgVof" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen&gt;&lt;/iframe&gt;

---
## Primeria Gera√ß√£o: T√©cnica Sanger

### Interpreta√ß√£o dos resultados

* √ìtimo

  * Picos bem distribuidos
  * Cada pico uma cor s√≥
  * Altura dos picos pode variar 3 vezes
  * Ruido m√≠nimo
  
&lt;img src="03.Images/chromatogram1.jpeg" width="100%" style="display: block; margin: auto;" /&gt;
---
## Primeria Gera√ß√£o: T√©cnica Sanger

### Interpreta√ß√£o dos resultados

* Aceit√°vel

  * Um pouco mais de ru√≠do
  * Picos bem distribu√≠dos
  * Cada pico uma cor s√≥

&lt;img src="03.Images/chromatogram2.jpeg" width="100%" style="display: block; margin: auto;" /&gt;

---
## Primeria Gera√ß√£o: T√©cnica Sanger

### Interpreta√ß√£o dos resultados

* Reprovado

  * Muito ru√≠do
  * Picos de mais de uma cor nas posi√ß√µes 271, 273, 279
  * Algumas partes com picos desorganizados
  * Posi√ß√£o 310, n√£o √© claro qual √© o nucleot√≠deo real

&lt;img src="03.Images/chromatogram3.jpeg" width="100%" style="display: block; margin: auto;" /&gt;

---
## Nova ou Segunda Gera√ß√£o

* Podem ser sequenciadas v√°rias mol√©culas de DNA (Paralelismo)
* Mais r√°pido
* Gera maior volume de dados
* Baixo custo
* Menor comprimento dos fragmentos (short-reads)
* Requer prepara√ß√£o de bibliotecas
* Necessidade de novos algoritmos para processamento dos dados

---
## Nova ou segunda gera√ß√£o: Ion Torrent 

* Sequenciamento por s√≠nteses

* Similar ao pirosequenciamento (454 Roche)

* Detec√ß√£o dos nucleot√≠deos por mudan√ßas no pH (libera√ß√£o de protons)

* Uso de semicondutores como sensor

* Fragmetos de 200 a 600 bp

* *Single-end*

&lt;img src="03.Images/iontorrent.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Ion Torrent  

&lt;img src="03.Images/iontorrent2.png" width="70%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Ion Torrent  

&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/ltHX21vUJb0?si=fVFiE7bsvWb5nUFW" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen&gt;&lt;/iframe&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

--
* Sequenciamento por s√≠nteses: identifica simultaneamente os nucleot√≠deos enquanto os incorpora na cadeia de DNA

--
* Nucleot√≠deos modificados, carregam um fluor√≥foro para serem detectados

--
* Os nucleot√≠deos tamb√©m posuem um terminador **revers√≠vel** que bloqueia a incorpora√ß√£o da pr√≥xima base

--
* Detec√ß√£o por fluorescencia

--
* Uma vez √© detectado o nucleot√≠deo que foi adicionada na cadeia, o terminador √© clivado para a pr√≥xima base possa se ligar e continuar o sequenciamento

--
* Maior custo-benef√≠cio: curto tempo de leitura, baixa taxa de erro e altamente escal√°vel. 

--
* Na mais recente plataforma NovaSeq 6000, podem ser analisadas at√© 798 amostras simultaneamente

--
* *Single-end* (sequenciamento de uma das pontas dos fragmentos, uma leitura por fragmento) e *paired-end* (sequenciamento das duas pontas dos fragmentos, duas leituras por fragmento)

---
## Nova ou segunda gera√ß√£o: Illumina

### *Single-end*  vs. *Paired-end*

&lt;img src="03.Images/pairedend.png" width="70%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Prepara√ß√£o das bibliotecas (*paired-end*)

* Fragmenta√ß√£o aleat√≥ria do DNA (150 a 300 bp)
  * M√©todos f√≠sicos de fragmenta√ß√£o (ex. sonica√ß√£o e nebuliza√ß√£o)
  * M√©todos qu√≠micos (ex. enzimas de restri√ß√£o)
  **Este processo tem que ser o mais aleat√≥rio poss√≠vel**
* Liga√ß√£o dos *Barcodes* (v√°rias amostras simult√°neamente).
* Liga√ß√£o dos adaptadores nas extermidades de cada fragmento
  * Permitem se ligar aos adaptadores complementares numa placa de vidro (*flow cell*).
  
&lt;img src="03.Images/adaptadores.png" width="50%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Prepara√ß√£o dos clusters

* Cada fragmento se ligar√° √† placa por complementariedade dos adaptadores e gerar√° um cluster.


&lt;img src="03.Images/cluster.png" width="70%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Prepara√ß√£o dos clusters

* Cada sequencia pressa na placa ser√° amplificada por PCR gerando os *clusters*.
* Cada *cluster* cont√™m ~1 milh√£o de c√≥pias do mesmo fragemento
* Amplifica√ß√£o em ponte

&lt;img src="03.Images/cluster2.png" width="55%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Prepara√ß√£o dos clusters

* Cada sequencia pressa na placa ser√° amplificada por PCR gerando os *clusters*.
* Cada *cluster* cont√™m ~1 milh√£o de c√≥pias do mesmo fragemento
* Amplifica√ß√£o em ponte

&lt;img src="03.Images/cluster3.png" width="55%" style="display: block; margin: auto;" /&gt;
---
## Nova ou segunda gera√ß√£o: Illumina

### Prepara√ß√£o dos clusters

* Cada sequencia pressa na placa ser√° amplificada por PCR gerando os *clusters*.
* Cada *cluster* cont√™m ~1 milh√£o de c√≥pias do mesmo fragemento
* Amplifica√ß√£o em ponte

&lt;img src="03.Images/cluster4.png" width="50%" style="display: block; margin: auto;" /&gt;
---
## Nova ou segunda gera√ß√£o: Illumina

### Prepara√ß√£o dos clusters

* Cada sequencia pressa na placa ser√° amplificada por PCR gerando os *clusters*.
* Cada *cluster* cont√™m ~1 milh√£o de c√≥pias do mesmo fragemento
* Amplifica√ß√£o em ponte

&lt;img src="03.Images/cluster5.png" width="60%" style="display: block; margin: auto;" /&gt;
---
## Nova ou segunda gera√ß√£o: Illumina

### Prepara√ß√£o dos clusters

* Cada sequencia pressa na placa ser√° amplificada por PCR gerando os *clusters*.
* Cada *cluster* cont√™m ~1 milh√£o de c√≥pias do mesmo fragemento
* Amplifica√ß√£o em ponte

&lt;img src="03.Images/cluster6.png" width="60%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Sequenciamento por s√≠nteses

* Os quatro nucleot√≠deos (*FI-NTPs*) s√£o adicionados ao mesmo tempo
* S√£o modificados, tem um fluor√≥foro diferente cada um e um bloqueador remov√≠vel no extremo 3'

&lt;img src="03.Images/seq1.png" width="30%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Sequenciamento por s√≠nteses

* Os quatro nucleot√≠deos s√£o adicionados ao mesmo tempo
* S√£o modificados, tem um fluor√≥foro diferente cada um e um bloqueador remov√≠vel no extremo 3'

&lt;img src="03.Images/SEQ2.png" width="30%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Sequenciamento por s√≠nteses

* O laser excita o fluor√≥foro e o nucleot√≠deo adicionado √© detectado


&lt;img src="03.Images/seq3.png" width="50%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Sequenciamento por s√≠nteses

* O terminador e o fluor√≥foro s√£o clivados

&lt;img src="03.Images/seq4.png" width="40%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Sequenciamento por s√≠nteses

* O seguinte nucleot√≠deo √© adicionado


&lt;img src="03.Images/seq5.png" width="40%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Sequenciamento por s√≠ntese

* E o processo √© repitido at√© terminar de sintetizar o fragmento


&lt;img src="03.Images/seq6.png" width="50%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

### Sequenciamento por s√≠nteses

* Imagem obtida a cada ciclo

* A imagem √© transformada em bases (*basecalling*) e *reads* ou leituras.

* Sequenciamento *paired-reads* ger√° um arquivo por cada extremo (R1 e R2)


&lt;img src="03.Images/seq7.png" width="60%" style="display: block; margin: auto;" /&gt;
---
## Nova ou segunda gera√ß√£o: Illumina

### Sequenciamento por s√≠nteses

&lt;img src="03.Images/seq8.gif" width="70%" style="display: block; margin: auto;" /&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/fCd6B5HRaZ8?si=fNvVsJ2TlvSaXl1X" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen&gt;&lt;/iframe&gt;

---
## Nova ou segunda gera√ß√£o: Illumina

&lt;img src="03.Images/plataformasIllumina.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Terceira gera√ß√£o: Oxford Nanopore

* *Long-reads* (~10 - 15 kbp). Facilita a montagem de genomas 

* Sequenciamento de mol√©cula √∫nica (SMS): Dispensa as etapas de amplifica√ß√£o por PCR, nas tecnologias anteriores

* Sequenciamento em tempo real

* Precio do equipamento desde $1.000 USD

* Taxa de erro mais alta que Illumina (~10%)

* O fragmento de DNA passa por um nanoporo proteico

---
## Terceira gera√ß√£o: Oxford Nanopore

* A corrente i√¥nica sofre varia√ß√µes causadas pela liga√ß√£o de v√°rios nucleot√≠deos no mesmo poro

* As varia√ß√µes na corrente i√¥nica √© registrada em um modelo gr√°fico e interpretada para identificar a sequ√™ncia gerando leituras "1D" ou "2D" (quando s√£o lidas as duas fitas de DNA)

* O sequenciamento 1D, √© mais r√°pido, o protocolo mais simples e barato

* O sequenciamento 2D, mais demorado, por√©m sequencia com maior confiabilidade

&lt;img src="03.Images/minion.webp" width="50%" style="display: block; margin: auto;" /&gt;

---
## Terceira gera√ß√£o: Oxford Nanopore

* A assinatura el√©trica detectada √© usada para inferir as bases presentes

&lt;img src="03.Images/poro.webp" width="100%" style="display: block; margin: auto;" /&gt;

---
## Terceira gera√ß√£o: Oxford Nanopore

### Prepara√ß√£o das bibliotecas

&lt;img src="03.Images/minionprep.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Terceira gera√ß√£o: Oxford Nanopore

&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/iT_A_ucWMls?si=vE2FHAXMAJQOrErf" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen&gt;&lt;/iframe&gt;

---
## Terceira gera√ß√£o: Oxford Nanopore

### Equipamentos

&lt;img src="03.Images/oxford.png" width="100%" style="display: block; margin: auto;" /&gt;

---
## Que plataforma escolher?

&lt;img src="03.Images/comparison.png" width="80%" style="display: block; margin: auto;" /&gt;

[Illumina](https://www.illumina.com/systems/sequencing-platforms/comparison-tool.html#/)
---

## Gen√¥mica vs Metagen√¥mica

**Gen√¥mica**

* Sequenciamento de um microrganismos isolado

* S√≥ cultiv√°veis

* Bioinform√°tica mais simples

**Metagen√¥mica**

* Sequenciamento do **DNA total** de uma amostra (ex. solo, agua, alimentos, biorreator)

* N√£o precisa m√©todos de cultivo 

* Bioinform√°tica mais complexa

---
## At√© aqui aprendimos:

* Lembramos conceitos b√°sicos de biologia molecular, especialmente relacionados com a estrutura do DNA.

* Uma viagem pela hist√≥ria do sequenciamento at√© nossos dias

* Revis√£o das principais tecnologias de sequenciamento, os principios, m√©todos, vavntagens e disvantagens


---
class: center, middle, inverse

.huge[
# 2. No√ß√µes de linguagem de programa√ß√£o: Linux
]

---
## Neste m√≥dulo vamos aprender:

* Linux como ferramenta de trabalho

* L√≥gica de programa√ß√£o, o b√°sico do b√°sico para processar dados de gen√¥mica e metagen√¥mica

* Uso de ferramentas locais para an√°lise de seus dados

---
## Neste m√≥dulo **N√£o** vamos a aprender:

* Detalhes dos algoritmos utilizados

* Programa√ß√£o direta (A maioria dos *scripts* j√° est√£o prontos)

---
## Sistema Operacional - GNU/LINUX

* Software livre e de c√≥digo aberto
* A maioria das ferramentas de bioinform√°tica foram desenvolvidas para este sistema operacional
* Distribui√ß√£o mais famosa: *Ubuntu*
* Multitarefa
* Multiusu√°rio

.center[
![dna](https://media.giphy.com/media/4N5ddOOJJ7gtKTgNac/giphy.gif)
]

---

## GUI vs CLI

* GUI: *Graphical User Interface*

  * Uso de teclado, mouse, voz.
  
  * Windows
  
  * Linux (sim tamb√©m tem GUI)
  
  * Dificil automatiza√ß√£o
  
  * Trabalho manual, maior possibilidade de erros
  
* CLI: *Command Line Interface*

  * Linha de comando (Tela preta + c√≥digos)
  
  * F√°cil automatiza√ß√£o
  
  * Maioria das ferramentas de bioinform√°tica usam linha de comando
  
---
## Shell

O *shell* do Linux √© um interpretador da linha de comando. √â uma ferramenta que permite aos usu√°rios executar tarefas complexas e poderosas, geralmente com algumas linhas de c√≥digo.

Usar o *shell* exigir√° algum esfor√ßo e algum tempo para aprender. Voc√™ ter√° que praticar os comandos como novo vocabul√°rio de um idioma novo. 

No entanto, aprendendo um pequeno n√∫mero de "palavras" (comandos), voc√™ ter√° percorrido j√° um longo caminho. Essas poucas por√©m essenciais palavras s√£o as que aprenderemos.

A gram√°tica de um *shell* permite combinar ferramentas existentes em pipelines poderosos e lidar automaticamente com grandes volumes de dados.

Sequencias de comandos podem ser escritas em um *script*, melhorando a reprodutibilidade dos fluxos de trabalho.


---
class: center, middle, inverse

# M√£os a obra

.center[
![](https://media.giphy.com/media/MdA16VIoXKKxNE8Stk/giphy.gif)
]
---
## Abrindo o *shell*

* Abra o aplicativo Ubuntu subsystem

Quando o *shell* √© aberto, apresentar√° o que se conhece com *prompt*, o que indica que o *shell* est√° pronto.

O *prompt* mais com√∫m √© `$`

Nos exemplos das aulas sempre aparecer√° primeiro o *prompt* `$`. N√£o √© necess√°rio digitar o *prompt* quando fa√ßam comandos de exemplo. S√≥ digitem o que est√° **depois** do *prompt*.

As vezes, antes do *prompt* pode ter outras informa√ß√µes como o nome do usu√°rio.

√â hora de tentar o primeiro comando...

---

## Mais antes uma informa√ß√£o importante...

Ao igual que o Windows ou o Mac, o Linux est√° organizado em diret√≥rios, portanto todos os arquivos s√£o guardados nos diret√≥rios. 

Depois a gente volta no conceito de estrutura dos diret√≥rios no Linux.

---

## Navegando por arquivos e diret√≥rios

O sistema respons√°vel pelo gerenciamento dos arquivos e os diret√≥rios √© chamado de *file system*.

Organiza os nossos dados dentro de arquivos, que carregam a informa√ß√£o, e diret√≥rios ou pastas, que carregam arquivos ou outros diret√≥rios. 

A continua√ß√£o aprenderemos uma s√©rie de comandos que s√£o usados frequentemente para criar, inspeccionar, renomear e deletar arquivos e diret√≥rios.

---
## `pwd` - *Print Working Directory*

.panelset[
.panel[.panel-name[`pwd`]

Os diret√≥rios s√£o como *lugares*, sempre que estamos usando o *shell*, estamos exatamente em um lugar, chamado *current working directory* (diret√≥rio atual de trabalho).
Os comandos leem e gravam principalmente arquivos no diret√≥rio atual de trabalho, ou seja, .yellow['aqui'], portanto √© importantye saber onde voc√™ est√° antes de executar um comando.

`pwd` mostra onde voc√™ esta:

.orange[Input]
.code-bg-gray[
```
$ pwd
```
]
.green[Output]
.code-bg-gray[
```
/Users/macbook
```
]
]

.panel[.panel-name[Nota]

**Nota:** O caminho ao diret√≥rio atual pode aparecer diferente segundo o sistema operativo. Por exemplo em Linux pode ser `/home/macbook`, e em Windows, pode ser similar a `C:\Docuements and Settigs\macbook` ou `C:\Users\macbook`. Isso pode variar inclusive entre vers√µes de Windows. Nos pr√≥ximo exemplos, usaremos o output de Mac como padr√£o. No Linux e Windows pode ser um pouquinho diferente.
]

.panel[.panel-name[Graficamente]

&lt;img src="03.Images/diretorios.png" width="60%" style="display: block; margin: auto;" /&gt;
O sistema de arquivos do meu laptop, √© algo assim. O diret√≥rio mais para cima, √© o chamado **root**, o qual tem todos os arquivos e pastas do meu laptop. Se simboliza com a barra `/`. Essa barra √© a mesma que est√° no `/Users/macbook`. Dentro do diret√≥rio *root*, tem outros diret√≥rios, como s√£o: `Applications`, `bin`, `etc`, `home`, `Users`, etc. 

Ent√£o, agora a gente sabe que o meu diret√≥rio atual de trabalh √© `/Users/macbook` que est√° armazenado dentro `/Users`, porque `/Users` √© a primeira parte do caminho. E assim, tamb√©m percebemos que `/Users` est√° armazenado dentro do diret√≥rio *root* `/`, porque o caminho come√ßa com `/`.
]

.panel[.panel-name[Nota 2]

Note que a barra `/` tem dois significados. Quando aparece na frente de um arquicvo o diret√≥rio se refere ao diret√≥rio *root*. Quando aparece entre o caminho, √© um separador.

]

.panel[.panel-name[Explorando mais]

Explorando mais, a gente pode perceber que dentro de `/Users`, se encontram os diret√≥rios, *Shared* e *macbook*.
&lt;img src="03.Images/diretorios2.png" width="70%" style="display: block; margin: auto;" /&gt;

.blue[**Agora √© sua vez...**]

* Qual √© seu diret√≥rio de trabalho?

]
]

---
## `ls` - *list*

.panelset[
.panel[.panel-name[`ls`]

Agora sabemos qual √© nosso diret√≥rio atual, mas e como podemos acceder ao conte√∫do deste diret√≥rio?.
O comando `ls` listar√° o conte√∫do do diret√≥rio atual.

.orange[Input]

.code-bg-gray[
```
$ ls
```
]

.green[Output]

.code-bg-gray[
```
Applications		        Google Drive		Public
CytoscapeConfiguration	Library			    Source
Desktop			            Movies			    miniconda3
Documents		            Music
Downloads		            Pictures
```
]
]
.panel[.panel-name[`ls -F`]

Comumente os comandos podem ser acompanhados por argumentos, mudando o resultado. Por exemplo se usarmos o argumento `-F`, pede para o `ls` classificar o conte√∫do do diret√≥rio pelo tipo de elemento, por exemplo, diret√≥rio, arquivo ou execut√°vel. `/` : Diret√≥rio; `@` : √© um link; `*` : execut√°vel.

.orange[Input]

.code-bg-gray[
```
$ ls -F
```
]

.green[Output]

.code-bg-gray[
```
Applications/		          Google Drive/		Public/
CytoscapeConfiguration/	  Library/			  Source/
Desktop/			            Movies/			    miniconda3/
Documents/		            Music/
Downloads/		            Pictures/
```
]
]
.panel[.panel-name[Dica!]

**Nota:** Se voc√™ quiser limpar o seu terminal (*shell*), digite o comando `clear`. Usando as zetas ‚¨ÜÔ∏è ‚¨áÔ∏è, podem ser recuperados linhas de comando digitadas anteriormente.

]

.panel[.panel-name[Ajuda]

Normalmente todos os comandos tem um men√∫ de ajuda, onde voc√™ pode ver qual √© a fun√ß√£o desse comando e os argumentos que pode usar.

.orange[Input]

.code-bg-gray[
```
$ ls --help
```
]

.blue[**Agora √© sua vez...**]

* Liste o conte√∫do do seu diret√≥rio atual

* Acceda ao men√∫ de ajuda do comando `ls`

* Teste mais argumentos do comando `ls` (ex. `-r`, `-t`, `-l` e `-a`), e veja o que cada uma das op√ß√µes faz.

]

.panel[.panel-name[Explorando mais]

`ls` n√£o √© somente para usar no diret√≥rio atual, tamb√©m podem ser explorados outros diret√≥rios. 

D√™ uma olhada na pasta **Escrit√≥rio**, digitando `ls -F Escritorio`. Nesse exemplo o comando √© `ls`, a op√ß√£o √© `-F` e o argumento √© `Escritorio`.

O argumento `Escritorio` diz para `ls` que queremos listar o conte√∫do de um diret√≥rio diferente ao atual, no caso o diret√≥rio `Escritorio`

Se o diret√≥rio `Escritorio` n√£o existe no seu diret√≥rio atual, ser√° retornado um erro. Normalmente, o diret√≥rio `Escritorio` existe dentro de seu diret√≥rio `home`. 

]
]
---
## Sintaxe geral dos comandos no shell

Normalmente, um comando se divide em: comando, op√ß√µes e argumentos.

.orange[Input]

.code-bg-gray[
```
$ ls -l Escritorio
```
]

&lt;img src="03.Images/sintaxe.png" width="60%" style="display: block; margin: auto;" /&gt;

Tamb√©m podem ser encontradas op√ß√µes que al√©m de come√ßar com um tra√ßo simples (`-`), conhecido como op√ß√£o curta, podem come√ßar com dois tra√ßos (`--`). As op√ß√µes mudam o comportamneto do comando e os argumentos falam para o comando a qual elemento ser√° aplicado o comando (p.e. arquivos e diret√≥rios). As vezes os argumentos tamb√©m s√£o chamados param√™tros. Um comando pode ter mais de uma op√ß√£o e mais de um argumento, por√©m n√£o sempre se requer um arguemnto ou uma op√ß√£o.

---
## `mkdir` - *Make Dir*

.panelset[
.panel[.panel-name[`mkdir`]

O comando `mkdir` serve para criar diret√≥rios.

Antes de criar o nosso primeiro diret√≥rio, primeiro revisemos as boas pr√°ticas para nomear arquivos e diret√≥rios.

1. **N√£o** crie nomes com espa√ßos. `curso_senai` √© melhor que `curso senai`
2. **N√£o** √© permitido o uso de caracteres especiais, como: $%&amp;*()+=¬®;'?#@¬°!
3. **N√£o** comece com `-`, os comandos tratam os nomes que como come√ßam com `-` como as op√ß√µes
4. Coloque nomes que sejam indicativos do que o arquivo ou diret√≥rio contem. `curso_genomica_senai` √© melhor que `curso`
5. **Recomenda√ß√£o:** para trabalhos de passos sequenciais, facilita nomear os diret√≥rios com n√∫meros que indiquem a etapa do trabalho. `00.DadosBrutos` melhor que `DadosBrutos`, `01.Qualidade` melhor que `Qualidade`
]

.panel[.panel-name[Uso]

Criaremos um diret√≥rio para armazenar todo o relacionado ao curso. Esta ser√° sua pasta durante o curso todo.

.orange[Input]

.code-bg-gray[
```
$ mkdir curso_senai
```
]

* Como confirmaria que o diret√≥rio foi criado?

]

.panel[.panel-name[Conceito:Caminho]

Uma vez criado o diret√≥rio do curso, criaremos uma pasta dentro dele para armazenar o relacioanado a nossa aula de comandos b√°sicos de linux.
Mas antes...

* Identifique onde voc√™ est√°?

Para conseguir criar o diret√≥rio dentro de `curso_senai`, primeiro temos que aprender o conceito de **caminho**

O **caminho** de um diret√≥rio ou arquivo nada mais √© que a localiza√ß√£o completa desse elemento. Por exemplo `/Users/macbook/curso_senai`: A pasta `curso_senai`, est√° dentro de `macbook` que a sua vez est√° dentro de `Users` que est√° dentro da pasta raiz `/`. 

Existem **caminhos absolutos** e **caminhos relativos**. O exemplo anterior √© um caminho absoluto. O caracter `~` √© interpretado por *shell* como o diret√≥rio *home* do usuario, ou seja `~/curso_senai` √© o mesmo que `/Users/macbook/curso_senai`, porque o diret√≥rio *home* no meu caso √© `/Users/macbook/`. 

]

.panel[.panel-name[Pr√°tica]

Entendido o conceito de caminho...

* Como criar um diret√≥rio dentro de outro? 

.orange[Input]

.code-bg-gray[.can-edit[
```
$ mkdir ???
```
]
]
]
]

---
## `cd` - *Change Directory*

.panelset[
.panel[.panel-name[`cd`]

At√© agora j√° aprendimos como nos localizar dentro do sistema de arquivos, o que √© caminho e como criar diret√≥rios, por√©m como entramos e saimos dos diret√≥rios?

O comando `cd` nos permite trocar entre diret√≥rios, basta s√≥ indicar o caminho da pasta.

Por exemplo, estando no diret√≥rio *home*, queremos ir √† pasta que criamos anteriormente `curso_senai`

.orange[Input]

.code-bg-gray[
```
$ cd curso_senai/
```
]
]

* Como voc√™ pode comprovar que mudou de diret√≥rio?

.panel[.panel-name[Atalhos]

Existem algumas conven√ß√µes para alguns diret√≥rios gen√©ricos.

* Diret√≥rio atual: `.` 

* Diret√≥rio contenedor do diret√≥rio atual: `..`

**Dica de ouro** 

Voc√™ pode usar a tecla **Tab** para autocompletar as palavras. Assim, economiza tempo, e evita erros de escrita, porque o sistema s√≥ vai completar nomes de elementos existentes no sistema. S√≥ tem que escrever as primeiras letras da palavra e presionar tab, e o sistema autocompletar√° a palavra.

]

.panel[.panel-name[Pr√°tica]

.blue[**Agora √© sua vez...**]

* Onde voc√™ est√°?
* Liste o conte√∫do do seu diret√≥rio atual?
* Qual seria a linha de comando para entrar na pasta `comandos_basicos`.
* Como voltaria ao diret√≥rio contenedor de `comandos_basicos` ou seja `curso_senai`

.orange[Input]

.code-bg-gray[.can-edit[
```
$ 
```
]
]
]
]

---
class: inverse

## Quiz

Use o diagrama de embaixo, se `pwd` imprime na tela `/Users/thing`, que sair√° usando a linha de comando `ls -F ../backup`?

1. `../backup: No such file or directory`
2. `2012-12-01 2013-01-08 2013-01-27`
3. `2012-12-01/ 2013-01-08/ 2013-01-27/`
4. `original/ pnas_final/ pnas_sub/`


&lt;img src="03.Images/exercicio1.jpg" width="60%" style="display: block; margin: auto;" /&gt;

---
class: inverse

## Quiz

Estando no diret√≥rio `/Users/macbook/curso_senai`, quais dos seguintes comando poderiamos usar para navegar e chegar no diret√≥rio home, que √© `/Users/macbook`? 

1. `cd .`
2. `cd /`
3. `cd /home/macbook`
4. `cd ../..`
5. `cd ~`
6. `cd home`
7. `cd ~/curso_senai/..`
8. `cd`
9. `cd ..`

---
class: inverse

## Quiz

Use o diagrama de embaixo, se `pwd` imprime na tela `/Users/backup`, e -r diz para o `ls` imprimir o nomes dos elementos em ordem reversa, qual ou quais comandos daria o seguinte output:

.green[Output]
.code-bg-gray[
```
pnas_sub/ pnas_final/ original/
```
]

&lt;img src="03.Images/exercicio2.jpg" width="45%" style="display: block; margin: auto;" /&gt;

1. `ls pwd`
2. `ls -r -F`
3. `ls -r -F /Users/backup`

---

## `nano` - Editor de texto

.panelset[
.panel[.panel-name[`nano`]

`nano` √© um editor de texto, com o qual podemos criar ou editar arquivos planos.

.orange[Input]

.code-bg-gray[
```
$ nano teste.txt
```
]

Para este curso vamos usar `nano` porque √© um dos editores de texto plano mais simples de usar. No entanto por essa mesma raz√£o ele n√£o √© t√£o podereso e flex√≠vel. Existem outros para Linux, como [**Emacs**](https://www.gnu.org/software/emacs/) e [**Vim**](https://www.vim.org/), por√©m ambos precisam de mais tempo para aprender us√°-los. Em Windows, pode ser usado **Notepad++**

]

.panel[.panel-name[Pr√°tica]

.blue[**Agora √© sua vez...**]

* Se necess√°rio use o comando `cd` para entrar na pasta `comandos_b√°sicos`

* Crie um arquivo chamado `teste.txt`. Escreva dentro do arquivo: `Ol√° Mundo`

* Para sair do editor pressione ctrl + x, ele vai perguntar se voc√™ quer gravar, pressione S ou Y. Depois ele vai perguntar se quer manter o nome, se sim √© s√≥ pressionar Enter. 

* Descarregue os arquivos: `propanol.txt`, `etanol.txt`, `metanol.txt` e `pentanol.txt`. Armazene eles no diret√≥rio `~/curso_senai/comandos_basicos/`.

* Para entrar nos arquivos √© s√≥ usar `nano nome_do_arquivo`

.orange[Input]

.code-bg-gray[
```
# Por exemplo
$ nano teste.txt
```

* Confira que conte√∫do do diret√≥rio.
]
]
]

---
## `mv` - *Move*

.panelset[
.panel[.panel-name[`mv`]

O comando `mv` serve para mover arquivos de uma pasta a outra. Al√©m este comando tamb√©m pode ser usado para mudar os nomes dos elementos.
A sintaxe para mover arquivos √®:

.orange[Input]

.code-bg-gray[
```
$ mv arquivo.txt diretorio/
```
]
]

.panel[.panel-name[Pr√°tica 1]

.blue[**Agora √© sua vez...**]

* Dentro da pasta `~/curso_senai/comandos_basicos`, crie um novo diret√≥rio que se chame `01.Exercicio`.

* Transfira o arquivo que criou com `nano` chamado `teste.txt` que est√° armazenado na pasta `~/curso_senai/comandos_basicos` para o diret√≥rio que acabou de criar.

* Que comando pode ser usado para confirmar as mudan√ßas feitas?

.orange[Input]

.code-bg-gray[.can-edit[
```
$ 
```
]
]
]

.panel[.panel-name[Trocando o nome]

O `mv` tamb√©m serve para trocar os nomes dos arquivos ou pastas.
A sintaxe para esta fun√ß√£o √©:

.orange[Input]

.code-bg-gray[
```
$ mv arquivo.txt novo_nome.txt
```
]
]

.panel[.panel-name[Pr√°tica 2]

.blue[**Agora √© sua vez...**]

* Agora use o comando `mv` para trocar o nome do arquivo `teste.txt` para `arquivo.txt`


* Que comando pode ser usado para confirmar as mudan√ßas feitas?

.orange[Input]

.code-bg-gray[.can-edit[
```
$ 
```
]
]
]
]

---
class: inverse

## Quiz

Depois de executar os seguintes comandos, Jo√£o colocou os arquivos `genes.txt` e `proteinas.txt` no diret√≥rio errado. Os arquivos deveriam estar no diret√≥rio `dados`.

.yellow[BASH]

.code-bg-gray[
```
$ ls -F
analises/ dados/
$ ls -F analises
bacterias.txt genes.txt genomas.txt proteinas.txt
$ cd analises
```
]

Preencha os espa√ßos para mover os arquivos para o diret√≥rio `dados/` 

.yellow[BASH]

.code-bg-gray[.can-edit[
```
$ mv genes.txt proteinas.txt ___/___
```
]
]

---
## `cp` - *Copy*

.panelset[
.panel[.panel-name[`cp`]

O comando `cp` √© similar ao `mv`, por√©m ele c√≥pia o arquivo ao inv√©s de transferir ele. Ou seja, ficar√° uma vers√£o do arquivo na pasta original.

A sintaxe deste comando √© muito simples:
.orange[Input]

.code-bg-gray[
```
$ cp diretorio_de_origem/arquivo.txt diretorio_de_destino/
```
]
]

.panel[panel-name[Pr√°tica]

.blue[**Agora √© sua vez...**]

* Use os comandos necess√°rios para saber onde voc√™ est√° neste momento. Se voc√™ n√£o estiver na pasta `~/curso_senai/comandos_basicos/`, vai at√© ela. 

* Execute os comandos desde `~/curso_senai/comandos_basicos/`

* Copie o arquivo chamado `arquivo.txt` que est√° armazenado no diret√≥rio `~/curso_senai/comandos_basicos/01.Exercicio/` na pasta `~/curso_senai/comandos_basicos/`.

* Copie novamente `arquivo.txt` porem agora na pasta `~/curso_senai/`.

* Confira as mudan√ß√£s feitas

.orange[Input]

.code-bg-gray[.can-edit[
```
$ 
```
]
]
]

.panel[.panel-name[E diret√≥rios?]

Para c√≥piar arquivos √© s√≥ usar a op√ß√£o ou param√™tro `-r`.

Lembrando que todos os comandos tem um men√∫ de ajuda ao qual podem acessar com a op√ß√£o `-h` ou `--help`.

]
]

---
class: inverse

## Quiz

Suponha que voc√™ criou um arquivo de texto plano, no seu diret√≥rio atual que contem uma lista de testes estat√≠sticos que voc√™ precisa para analisar seus dados e o chama de `estatsticos.txt`

Depois criar e salvar este arquivo, voc√™ percebeu que errou na escrita no nome, e voc√™ quer corrigir o erro. Qual dos seguinte comando poderia ser usado para isso?

1. `cp estatsticos.txt estatisticos.txt`
2. `mv estatsticos.txt estatisticos.txt`
3. `mv estatsticos.txt .`
4. `cp estatsticos.txt .`


---
## `rm` - *Remove*

.panelset[
.panel[.panel-name[`rm`]

Com o comando `rm` voc√™ pode remover arquivos e ou pastas. A sintaxe √©:
.orange[Input]
.code-bg-gray[
```
$ rm arquivo.txt
```
]


üëÄÔ∏è**Neste tipo de sistemas n√£o existe a lixeira, por tanto o que for deletado, n√£o poder√° ser recuperado, CUIDADO!**

]
.panel[.panel-name[Pr√°tica]

.blue[**Agora √© sua vez...**]

* Ainda desde o diret√≥rio `~/curso_senai/comandos_basicos/`:

* Delete o arquivo chamado `arquivo.txt` do diret√≥rio `~/curso_senai/`

* Delete a c√≥pia que est√° na pasta `~/curso_senai/comandos_basicos/`

* Confira, s√≥ deve ter esse arquivo (`arquivo.txt`) dentro da pasta `~/curso_senai/comandos_basicos/01.Exercicio/` 

.orange[Input]

.code-bg-gray[.can-edit[
```
$ 
```
]
]

]

.panel[.panel-name[Dica!]

Para usar o uso do comando `rm` mais seguro, sempre use a op√ß√£o `-i`. Esse param√™tro faz com que o comando pe√ßa para o usu√°rio que confirme se quer mesmo deletar o arquivou e/ou diret√≥rio.

Fa√ßa o teste:

* Crie um arquivo plano, no diret√≥rio atual.

* Delete ele usando a op√ß√£o `-i`

* O que aconteceu?
]
]

---

## Caracteres Curingas

.panelset[
.panel[.panel-name[Aster√≠stico]

O caracter `*` √© muito √∫til na linha de comando, pois ele representa zero ou mais caracteres.

Por exemplo, no diret√≥rio `~/curso_senai/comandos_basicos/` temos os arquivos `propanol.txt`, `etanol.txt` e `metanol.txt` e `pentanol.txt`., os quais poderiam ser representados assim: `*.txt` (*tudo o que termina em `.txt`*). Assim mesmo, os arquivos `propanol.txt` e `pentanol.txt` podem ser representados como: `p*.txt` (*tudo o que come√ßa com `p` e termina com `.txt`).

]

.panel[.panel-name[Interregoca√ß√£o]

O caracter `?` tamb√©m √© um caracter curinga, mas ele s√≥ pode representar um √∫nico caracter. Por exemplo, `?etanol.txt` (*um caracter seguido de `etanol.txt`*) representaria metanol enquanto `*etanol.txt` (*tudo o que termina em `etanol.txt`*) representaria `etanol.txt` e `metanol.txt`. 

Podem ser usados v√°rios ao mesmo tempo. Por exemplo `????anol.txt`, o que indica quatro caracteres seguidos de `anol.txt`, ou seja, `propanol.txt` e `pentanol.txt`.

]

.panel[panel-name[Pr√°tica]

Ok, mas na pr√°tica para que servem os caracteres curingas?

.blue[**Agora √© sua vez...**]

* Liste o conte√∫do do diret√≥rio `~/curso_senai/comandos_basicos/`

* Crie uma nova pasta chamada `02.Exercicio`

* Utilize os caracteres curingas para mover todos os arquivos que come√ßam com `p` para a pasta `~/curso_senai/comandos_basicos/02.Exercicio`

* Utilize os caracteres curingas para copiar todos os arquivos que tem a s√≠laba `ta`, sem importar com o que termina e come√ßa, para a pasta `~/curso_senai/comandos_basicos/02.Exercicio`

.orange[Input]

.code-bg-gray[.can-edit[
```
$ 
```
]
]
]
]

---
class: inverse

## Quiz

Quando executa dentro do diret√≥rio `~/curso_senai/comandos_basicos/02.Exercicio`, qual dos comandos `ls` poderia produzir o seguinte *output*?

.green[Output]
.code-bg-gray[
```
ethanol.txt metanol.txt
```
]

1. `ls *t*nol.txt`
2. `ls *ta?ol.*`
3. `ls *et?nol.txt`
4. `ls etanol.*`

---
class: inverse

## Quiz

Suponha que voc√™ est√° iniciando um novo experimento e quer duplicar a estrutura do diret√≥rio de experimentos previos para adicionar os novos dados.

Asuma que seu experimento previo esta em uma pasta chamada `18-09-2023`, que contem a pasta `dados`, dentro da qual tem as pastas `brutos` e `processados`. O objetivo √© copiar a estrutura do diret√≥rio `18-09-2023` no diret√≥rio `20-10-2023` para obter uma estrutura similar a esta:

&lt;img src="03.Images/tree.png" width="45%" style="display: block; margin: auto;" /&gt;

* Qual dos seguintes conjuntos de comandos poderiam atingir o objetivo?

---
class: inverse

## Quiz

&lt;img src="03.Images/tree.png" width="45%" style="display: block; margin: auto;" /&gt;

```
$ mkdir 20-10-2023
$ mkdir 20-10-2023/dados
$ mkdir 20-10-2023/dados/processados
$ mkdir 20-10-2023/dados/brutos
```

```
$ mkdir 20-10-2023
$ cd 20-10-2023
$ mkdir dados
$ cd dados
$ mkdir brutos processados
```
---
class: inverse

## Quiz

&lt;img src="03.Images/tree.png" width="45%" style="display: block; margin: auto;" /&gt;

```
$ mkdir 20-10-2023/dados/brutos
$ mkdir 20-10-2023/dados/processados
```

```
$ mkdir -p 20-10-2023/dados/brutos
$ mkdir -p 20-10-2023/dados/processados
```

```
$ mkdir 20-10-2023
$ cd 20-10-2023
$ mkdir dados
$ mkdir brutos processados
```

---
## Ainda temos muitos comandos para aprender

Para os seguintes comandos, crie uma pasta chamada `03.Exercicio`, dentro dela, coloque os arquivos de texto, chamados `bssA_1.txt` e `bssA_2.txt`. Cada um deles cont√©m uma uma sequ√™ncia do gene *bssA* que codifica para a enzima *Benzylsuccinate synthase*. 

* [Sequencia](https://www.ncbi.nlm.nih.gov/nuccore/MW762608.1?report=fasta) do arquivo `bssA_1.txt`

* [Sequencia](https://www.ncbi.nlm.nih.gov/nuccore/FJ810633.1?report=fasta) do arquivo `bssA_2.txt`


.orange[Input]

.code-bg-gray[.can-edit[
```
$ 
```
]
]

---
## Comandos para visualizua√ß√£o de arquivos

.panelset[
.panel[.panel-name[`less`]
Este comando permite ler o conte√∫do de um arquivo de texto que cabe no tamanho da janela. N√£o l√™ todo o arquivo.

.orange[Input]

.code-bg-gray[.can-edit[
```
$ less bssA_1.txt
```
]
]

Para sair presione `q`

]

.panel[.panel-name[`more`]

Este comando permite ler o conte√∫do de um arquivo de texto uma p√°gina (uma tela) por vez. `more` pode ler todo o arquivo. Presionando a tecla Enter, ele vai passando linha por linha at√© o fim do arquivo.

.orange[Input]

.code-bg-gray[.can-edit[
```
$ less bssA_1.txt
```
]
]

Para sair presione `q`.
]

.panel[.panel-name[`head`]

Permite ler as primeiras 10 linhas do arquivo.

.orange[Input]

.code-bg-gray[.can-edit[
```
$ head bssA_2.txt
```
]
]

Se quiser aumentar ou diminuir o n√∫mero de linhas, coloque o n√∫mero de linhas que deseja como um param√™tro

.orange[Input]

.code-bg-gray[.can-edit[
```
$ head -n 12 bssA_2.txt
```
]
]
]

.panel[.panel-name[`tail`]

Permite ler as √∫ltimas 10 linhas do arquivo.

.orange[Input]

.code-bg-gray[.can-edit[
```
$ tail bssA_2.txt
```
]
]

Ao igual que com o comando anterior, pode modificar o n√∫mero de linhas que quiser ler.

.orange[Input]

.code-bg-gray[.can-edit[
```
$ tail -n 8 bssA_2.txt
```
]
]
]

.panel[.panel-name[`cat`]

Imprime o conte√∫do do arquivo que cabe na tela.

.orange[Input]

.code-bg-gray[.can-edit[
```
$ cat bssA_1.txt
```
]
]

Uma das op√ß√µes (`-n`) deste comando, permite que as linhas sejam numeradas

.orange[Input]

.code-bg-gray[.can-edit[
```
$ cat -n bssA_2.txt
```
]
]
]
]


---
## Comandos para manipula√ß√£o de arquivos

.panelset[
.panel[.panel-name[`wc`]

`wc` - *Word Count*, permite contar as linhas, palavras e caracteres de um arquivo.

.orange[Input]

.code-bg-gray[.can-edit[
```
$ wc bssA_2.txt
```
]
]

.green[Output]
.code-bg-gray[
```
12      21     842 bssA_2.txt
```
]

* Se voc√™ quisesse obter essa informa√ß√£o para os dois arquivos ao mesmo tempo, que linha de comando usaria?

.code-bg-gray[.can-edit[
```
$ 
```
]
]

* A op√ß√µes `-l`, `-m` e `-w` mostram s√≥ o n√∫mero de linhas, caracteres ou palavras, respetivamente.  
]


.panel[.panel-name[`cat`]

O comando `cat` - *Concatenate*, al√©m de ser usado para visualizar arquivos, tamb√©m √© usado para manipular arquivos, especificamente para concatena√ß√£o (juntar) de arquivos.

.orange[Input]
.code-bg-gray[.can-edit[
```
$ cat bssA_1.txt bssA_2.txt &gt; bssA_all.txt
```
]]

O caracter `&gt;`, diz paro sistema redirecionar a sa√≠da do comando para um arquivo, ao inv√™s de printar na tela. **CUIDADO**: Se o arquivo n√£o existe, o sistema criar√° o arquivo, por√©m se o arquivo j√° existe, ele ser√° sobrescrito silenciosamente, o que levar√° a uma perda de dados.

* Use os comandos de visualiza√ß√£o para dar uma olhada no novo arquivo criado (`bssA_all.txt`)


]

.panel[.panel-name[`grep`]

O comando `grep` permite procurar padr√µes dentro de um arquivo. Dado um ou v√°rios caracteres para ele procurar, ele imprimir√° na tela a linha completa onde o padr√£o foi encontrado.

.orange[Input]
.code-bg-gray[.can-edit[
```
$ grep 'CGACT' bssA_all.txt
```
]]

.green[Output]
.code-bg-gray[
```
CAGGACGACTGCAACGAATTAACAGATGTGATTCTTGATGCAGCCTACAGCCTGCGGACACAAGAGCACT
TCCGAGGGCGGCGGTTCGATCTTCCCGGCGAAGCTGCTGGAAATCACCCTCAACGACGGCTACGACTGGT
ATGGCCAATTGGGAAGGCTACGAGGAAATGCGACTGGAGTTCAAGCGCGCGCCG
```
]

* A op√ß√£o `-c`, diz para `grep` contar o n√∫mero de linhas em que o padr√£o aparece. Sendo muito √∫til por exemplo para contar sequ√™ncias.
]

.panel[.panel-name[`find`]

Procura arquivos

.orange[Input]
.code-bg-gray[.can-edit[
```
$ find . -name '*.txt'
```
]]

.green[Output]
.code-bg-gray[
 * O que significa `.` no c√≥digo?
 * O que significa `*.txt`
]


* E se voc√™ quiser procurar por arquivos que come√ßam com p, em todo seu diret√≥rio `home`. Qual seria a linha de comando?

.orange[Input]
.code-bg-gray[.can-edit[
```
$
```
]
]
]

.panel[.panel-name[`gzip`]

Compacta√ß√£o de arquivos

.orange[Input]
.code-bg-gray[.can-edit[
```
$ gzip *
```
]]

Assim, ser√£o compactados todos os arquivos dentro do diret√≥rio atual. Use `ls` para ver a nova extens√£o dos arquivos.

Para descompactar o comando √©:

.orange[Input]
.code-bg-gray[.can-edit[
```
$ gzip -d bssA_all.txt
```
]]

]

.panel[.panel-name[`tar`]

Compacta√ß√£o de arquivos

.yellow[BASH]
.code-bg-gray[.can-edit[
```
$ tar -cvf arquivo.tar meudiretorio/
```
]]

Compacta o diret√≥rio `meudiretorio/` e o nome do arquivo ser√° `arquivo.tar`

Para descompactar o comando √©:

.yellow[BASH]
.code-bg-gray[.can-edit[
```
$ tar -xvf arquivo.tar
```
]]

]

.panel[.panel-name[`zip`]

Compacta√ß√£o de arquivos

.yellow[BASH]
.code-bg-gray[.can-edit[
```
$ zip -r meudiretorio.zip meudiretorio/
```
]]

Compacta o diret√≥rio `meudiretorio/` em um arquivo chamado `meudiretorio.zip`

Para descompactar o comando √©:

.yellow[BASH]
.code-bg-gray[.can-edit[
```
$ unzip meudiretorio.zip
```
]]

]
]

---
## Capturando o *output* dos comandos

Ao igual que a gente viu com a saida do comando `cat`, isso pode ser feito para tudo o que gera um *output* que √© normalmente mostrado na tela.

Por exemplo: (dentro da pastas `~/curso_senai/comandos_basicos/exercicios/`)
.orange[Input]
.code-bg-gray[.can-edit[
```
$ wc -l bss* &gt; linhas.txt
```
]]

No arquivo `linhas.txt` ficou salvo a sa√≠da desse comando, ou seja do n√∫mero de linhas de todos os arquivos que come√ßam com `bss` dentro de `~/curso_senai/comandos_basicos/03.Exercicio/`, e o total. 

.orange[Input]
.code-bg-gray[.can-edit[
```
$ cat linhas.txt    
```
]]

---
## Caturando o *output* dos comandos

O comando `sort` permite ordenar arquivos. Por *default* a ordena√ß√£o √© alphanumerica. Se quisermos organizar s√≥ de maneira numerica, basta usar a `-n`.

.orange[Input]
.cod-bg-gray[.can-edit[
```
$ sort -n linhas.txt
```
]]

.green[Output]
.code-bg-gray[
```
 12 bssA_2.txt
 27 bssA_1.txt
 39 bssA_all.txt
 78 total
```
]

Assim mesmo poderiamos salvar o arquivo ordenado em um novo arquivo

.orange[Input]
.code-bg-gray[.can-edit[
```
$ sort -n linhas.txt &gt; linhas_ordenado.txt
```
]]

* Use os comandos de visualiza√ß√£o para dar uma olhada no arquivo `linhas_ordenado.txt`

---
## Capturando o *output* dos comandos

Al√©m do operador `&gt;`, tamb√©m temos um operado similar `&gt;&gt;`, o qual funciona um pouco diferente que o primeiro. Vamos usar o comando `echo` para aprender a diferen√ßa entre os dois. O `echo` nos permite imprimer texto na tela.

.orange[Input]
.code-bg-gray[.can-edit[
```
$ echo O comando echo printa texto na tela
```
]]

.green[Output]
.code-bg-gray[
```
O comando echo printa texto na tela
```
]

Agora vamos ver a diferen√ßa entre os dois operadores:
.orange[Input]
.code-bg-gray[.can-edit[
```
$ echo ol√° &gt; arquivo1.txt
```
]
]

.orange[Input]
.code-bg-gray[.can-edit[
```
$ echo ol√° &gt;&gt; arquivo2.txt
```
]]

Execute duas vezes os √∫ltimos dois comandos e depois d√™ uma olhada nos arquivos. Qual √© a diferen√ßa?

---
class: inverse

### Quiz

.blue[**Agora √© sua vez...**]

* Crie um novo diret√≥rio dentro de `~/curso_senai/comandos_basicos/`, chamado `04.Exercicio`

* Descarregue o arquivo `bacterias.csv` e armazene ele no diret√≥rio que acabou de criar. A extens√£o `.csv`, √© outro tipo de arquivo de texto plano, se refere normalmente a informa√ß√µes organizadas em colunas separadas por v√≠rgulas (*comma separated values*)
* Explore o arquivo, sem modific√°-lo.
* Depois dos seguintes comandos, o que ter√° no arquivo `bacterias_sub.csv`:

.orange[Input]
.code-bg-gray[.can-edit[
```
$ head -n 3 bacterias.csv  &gt; bacterias_sub.csv
$ tail -n 2 bacterias.csv &gt;&gt; bacterias_sub.csv
```
]]

1. As primeiras tr√™s linhas de `bacterias.csv`
2. As duas √∫ltimas linhas de `bacterias.csv`
3. As primeiras tr√™s e as √∫ltimas duas linhas de `bacterias.csv`
4. A segunda e a terceira linha de `bacterias.css`

---
## Combinando m√∫ltiplos comandos

Nada nos impede encadear comandos consecutivamente. Por exemplo, enviar a sa√≠da de `wc` diretamente para `sort`, e em seguida enviar a sa√≠da para `head`. Esto tira a necessidade de arquivos intermediarios. Para encadear comandos se usa o operador `|`, chamado *pipe*.

.orange[Input]
.code-bg-gray[.can-edit[
```
$ wc -l bssA* | sort -n
```
]]

.green[Output]
.code-bg-gray[
```
      12 bssA_2.txt
      27 bssA_1.txt
      39 bssA_all.txt
      78 total
```
]

---
## Combinando m√∫ltiplos comandos

Podemos enviar esse output usando outro `|` a `head`

.orange[Input]
.code-bg-gray[.can-edit[
```
$ wc -l bssA* | sort -n | head -n 1
```
]]

.green[Output]
.code-bg-gray[
```
      12 bssA_2.txt
```
]

---
class: inverse

## Quiz

Suponha que voc√™ que encontrar os tr√™s arquivos com menor n√∫mero de linhas. Qual comando seria o correcto?

1. `wc -l * &gt; sort -n &gt; head -n 3`
2. `wc -l * | sort -n | head -n 1-3`
3. `wc -l * | head -n 3 | sort -n`
4. `wc -l * | sort -n | head -n 3`

---
## Mais comandos √∫teis de Linux

```
wget # Permite descarreguar arquivos da web (p.e. bases de dados)
df    # Mostra o espa√ßo em disco
free -g     # info da mem√≥ria
uname -a    # Mostra a informa√ß√£o da m√°quina
du -sh    # mostra o espa√ßo usado em disco
du sh *     # mostra o espa√ßo usado em disco por arquivos e/ou diret√≥rios 
du -s * | sort -nr    # Mostra o espa√ßo usado em disco por arquivos e/ou dir√©torios ordenados por tamanho
top     # Mostra o top de consumidores de memoria e CPU 
who     # Mostra quem est√° logado no sistema
ps    # Mostra os processos rodando pelo usu√°rio
ps -e     # Mostra todos os processos rodando no sistema
ps -o %t -p &lt;pid&gt;     # Mostra quanto tempo leva rodando um determinado proceso (pid)
kill &lt;pid&gt;    # Mata o processo
```
---
class: inverse, center, middle

# *Loops*

## Aumenta a complexidade por√©m tamb√©m o poder

---
## *Loops*

Os *loops* ou la√ßos s√£o uma constru√ß√£o de programa√ß√£o que nos permite repetir um ou v√°rios comandos para cada item de uma lista. Eles s√£o fundamentais para melhorias de produtividade atrav√©s de automa√ß√£o.

Semelhante aos caracteres curingas e ao uso do tab para autocompletar palavras, o uso de *loops* tamb√©m reduz a quantidade de digita√ß√£o necess√°ria, reduzindo tamb√©m o n√∫mero de erros de digita√ß√£o. 

---
## *Loops*

Imagine que tem centenas de arquivos com genomas de bacterias chamados `bacteria_a`, `bacteria_b` e `bacteria_c` (descarregue os arquivos). Para o exemplo s√≥ teremos esses tr√™s arquivos, mas os principios podem ser aplicados a muitos mais arquivos ao mesmo tempo.

A estrutura destes arquivos √© a mesma, o nome abreviado, a classifica√ß√£o taxon√¥mica e a data de atualiza√ß√£o, est√£o nas primeiras tr√™s linhas, seguido de sequ√™ncias de DNA en las demais linhas. D√™ uma olhada nos arquivos. Mas antes, crie uma pasta chamada `05.Exercicio`, dentro do diret√≥rio `~/curso_senai/comandos_basicos/`. Coloque os arquivos dentro da nova pasta criada.

.orange[Output]
.code-bg-gray[.can-edit[
```
$ head -n 5 bacteria_*
```
]]

---
## *Loops*

Gostariamos de imprimir a classifica√ß√£o de cada esp√©cie (segunda linha). Para cada arquivo precisariamos executar o comando `head -n 2` e enviar a sa√≠da direto para `tail -n 1`. Usaremos um *loop* para resolver esse problema. 

Mas antes, essa √© a estrutura gen√©rica de um *loop* em forma de pseudoc√≥digo:

.code-bg-gray[
```
for i in lista_de_elementos 
# A palavra 'for' indica o inicio de um for-loop
do
# A palavra 'do' indica o inicio da lista de comandos a ser executada
  comando $i 
  # A indenta√ß√£o n√£o √© obrigat√≥ria, por√©m melhora a compreens√£o
done
# A palavra `done` indica o fim do loop
```
]

---
## *Loops*

No nosso exemplo, ficaria assim:
.orange[Input]
.code-bg-gray[.can-edit[
```
$ for arquivo in bacteria_a bacteria_b bacteria_c
&gt; do
&gt;   echo $arquivo
&gt;   head -n 2 $arquivo | tail -n 1
&gt; done
```
]]

.green[Output]
.code-bg-gray[.can-edit[
```
bacteria_a
CLASSIFICA√á√ÉO: Pseudomonas putida
bacteria_b
CLASSIFICA√á√ÉO: Escherichia coli
bacteria_c
CLASSIFICA√á√ÉO: Bacillus subtilis
```
]]

---
## *Loops*

### Algumas explica√ß√µes

* O prompt muda de `$` a `&gt;` para nos lembrar que n√£o temos completado o comando ainda. Volta ao normal quando o comando est√° terminado. 
* Quando o sistema ve a palavra `for`, entende que deve repetir um o v√°rios comandos para cada um dos elementos em uma lista. Cada vez que o *loop* √© executado (chamado de itera√ß√£o), um item da lista √© atribu√≠do √† vari√°vel, e os comandos dentro do *loop* s√£o executados, antes de passar para o pr√≥ximo item da lista. 
* Dentro do *loop* chamamos o valor da vari√°vel usando o `$`, para o sistema entender como uma vari√°vel e n√£o como texto.

---
## *Loops*

**No nosso exemplo**

A nossa lista cont√©m tr√™s arquivos: `bacteria_a`, `bacteria_b`, `bacteria_c`. Cada vez que o *loop* itera:
1. Usamos `echo` para imprimir o valor atribuido √† vari√°vel `$arquivo` nessa itera√ß√£o. Isto n√£o √© obrigat√≥rio, mas √© uma boa pr√°tica para ter mais facilidade para acompanhar os resultados.
2. √â executado o comando `head` no elemento que est√° sendo iterado (valor de `$arquivo`), extra√≠ndo as duas primeiras linhas do arquivo (*output*)
3. O *output* do comando `head` √© enviado diretamente pro comando `tail` que ent√£o imprime a segunda linha. Termina a primeira itera√ß√£o.
4. O processo come√ßa de novo, com o seguinte item da lista, e assim vai at√© iterar em todos os elementos da lista. 

* Lembrando o nome da vari√°vel pode ser o que a gente quiser, mas sempre √© uma boa pr√°tica colocar um nome que indique ao que esta-se referindo. Outro bom nome para a vari√°vel no exemplo anterior poderia ser `$genoma`

---
class: inverse

## Quiz

* Tente escrever um *loop*, que use o comando `echo` para imprimir na tela os n√∫meros de 0 a 9?

.orange[Input]
.code-bg-gray[.can-edit[
```
$ 
```
]]


---
class: inverse

## Quiz

* No direct√≥rio `~/curso_senai/comandos_basicos/02.Exercicio/` o comando `ls *.txt`

.green[Output]
.code-bg-gray[.can-edit[
```
etanol.txt	metanol.txt	pentanol.txt	propanol.txt
```
]]

* Qual seria o *output* do seguinte c√≥digo?
.code-bg-gray[.can-edit[
```
$ for alcool in *.txt
&gt; do
&gt;   ls *.txt
&gt; done
```
]]

* E o resultado deste?
.code-bg-gray[.can-edit[
```
$ for alcool in *.txt
&gt; do
&gt;     ls $alcool
&gt; done
```
]]

---
class: inverse

## Quiz

**Respostas**

.code-bg-gray[.can-edit[
```
etanol.txt	metanol.txt	pentanol.txt	propanol.txt
etanol.txt	metanol.txt	pentanol.txt	propanol.txt
etanol.txt	metanol.txt	pentanol.txt	propanol.txt
etanol.txt	metanol.txt	pentanol.txt	propanol.txt
etanol.txt	metanol.txt	pentanol.txt	propanol.txt
```
]]

* Em cada elemento que o *loop* itera, ele lista os elementos que terminam em `.txt`.

---
class: inverse

## Quiz

**Respostas**

.code-bg-gray[.can-edit[
```
etanol.txt
metanol.txt
pentanol.txt
propanol.txt
```
]]

*A cada itera√ß√£o o *loop* chama o elemento assignado na vari√°vel.

---
class: inverse

## Quiz

* Qual seria a sa√≠da para o seguinte *loop*

.code-bg-gray[
```
$ for alcool in e*
&gt; do
&gt;   ls $alcool
&gt; done
```
]

1. N√£o √© listado nenhum arquivo
2. Todos os arquivos s√£o listados
3. `metanol.txt`, `etanol.txt` e `pentanol.txt` s√£o listados
4. S√≥ `etanol.txt` ser√° listado

---
class: inverse

## Quiz

* E agora?

.code-bg-gray[
```
$ for alcool in *e*
&gt; do
&gt;   ls $alcool
&gt; done
```
]

1. Os mesmos arquivos ser√£o listados
2. Todos os arquivos s√£o listados desta vez
3. Nenhum arquivo ser√° listado
4. Os arquivos `metanol.txt`, `etanol.txt`, `pentanol.txt` ser√£o listados?
5. S√≥ o arquivo `etanol.txt` ser√° listado

---
class: inverse

## Quiz

Ao igual que vimos antes, dentro de um *loop* tamb√©m o poss√≠vel salvar o resultado dentro de um arquivo usando `&gt;`.

* Qual seria o efeito do seguinte *loop*?

.code-bg-gray[
```
for alcool in *.txt
do
  echo $alcool
  cat $alcool &gt; alcoois
done
```
]

1. Printa na tela `etanol.txt`, `metanol.txt`, `pentanol.txt` e `propanol.txt`, e salva o conte√∫do de `propanol.txt` num arquivo chamado `alcoois`
2. Printa na tela `etanol.txt` e `metanol.txt`, e o texto dos outros dos arquivos √© salvado dentro de `alcoois`
3. Printa `etanol.txt`, `metanol.txt` e `pentanol.txt`, e o texto de `propanol.txt` √© salvo no arquivo `alcoois`
4. Nenhuma das anteriores

---
class: inverse

## Quiz

* Qual seria o efeito do seguinte *loop*:

.code-bg-gray[
```
$ for alcool in *.txt
do
  cat $alcool &gt;&gt; todos
done
```
]

1. O texto de todos os arquivos terminados em `*.txt` sera concatenado e salvado no arquivo chamado `todos`
2. O texto de `etanol.txt` ser√° salvado no arquivo `todos`
3. O texto de todos os arquivos terminados em `*.txt` ser√£o printados na tela e salvos no arquivo `todos`

---
## *Loops* 

### Agora mais complexo ainda

Continuando com o nosso exemplo dos genomas das bacterias no diret√≥rio `~/curso-senai/comandos_basicos/05.Exercicio/`. Vamos ver um *loop* um pouco mais complexo:

.orange[Input]
.code-bg-gray[.can-edit[
```
$ for genoma in bacteria_*
&gt; do
&gt;   echo $genoma
&gt;   head -n 100 $genoma | tail -n 20
done
```
]]

A cada itera√ß√£o √© printado na tela o genoma iterado, as primeiras 100 linhas s√£o enviadas diretamente para o `tail`, que extrai as √∫ltimas 20 linhas dessas 100 (linhas 81 - 100) e esse resultado √© printado na tela. 

---
## *Loops*

Agora vamos supor que a gente quer modificar os arquivos, por√©m quer manter as vers√µes originais deles. Para isto vamos copiar os arquivos originais e vamos modificar os nomes para `original_bacteria_a`, `original_bacteria_b` e `original_bacteria_c`

.orange[Input]
.code-bg-gray[.can-edit[
```
$ for $bacteria in bacteria_*
&gt; do
&gt;   cp $bacteria original_$bacteria
&gt; done
```
]]


* Confira o resultado
* Que modifica√ß√£o faria ao comando para saber com que arquivo est√° trabalhando e/ou se o *loop* foi executado?

---
## *Loops*

### Graficamente

&lt;img src="03.Images/loop.png" width="30%" style="display: block; margin: auto;" /&gt;
  
---
## `screen`

O `screen` √© uma aplica√ß√£o desenvolvida para linux, que tem como objetivo a multiplexa√ß√£o de terminais. Ou seja, ele divide o terminal f√≠sico em v√°rias sess√µes virtuais. Quando voc√™ est√° trabalhando conectado remotamente a um servidor, e usa o `screen`, voc√™ pode deixar os seus processos em execu√ß√£o e desligar seu computador, eles ficaram rodando em *background*.

---
## `screen`

Para iniciar uma sess√£o:
.orange[Input]
.code-bg-gray[.can-edit[
```
$ screen -S minhaSessao
```
]
]

Para sair da sess√£o mantenha apertada a tecla **Ctrl**, enseguida aperte a tecla **a**, seguido da tecla **d**.

Para voltar na sess√£o
.orange[Input]
.code-bg-gray[.can-edit[
```
$ screen -ls #Lista as sess√µes ativas, caso n√£o lembre o nome
$ screen -r minhaSessao #entra na sess√£o desejada.
```
]]

---
## `scp` *Secure Copy Between Machines*

`scp` √© um comando que permite copiar elementos entre um servidor e seu computador e viceversa.

.code-bg-gray[.can-edit[
```
$ scp origem destino
```
]]

* Exemplo 1: Do servidor para seu computador
.code-bg-gray[.can-edit[
```
$ scp user@143.109.85.222:caminho/ao/arquivo.txt caminho/no/seu/pc
```
]]

* Exemplo 2: Do seu computador para o servidor
.code-bg-gray[.can-edit[
```
$ scp caminho/no/seu/pc/arquivo.txt user@143.109.85.222:caminho/onde/quer/copiar/no/servidor/
```
]]

Se voc√™ quiser copiar um diret√≥rio completo basta colocar a op√ß√£o `-r` ap√≥s o `scp`

---
class: inverse, center, middle

# ANACONDA

---
## Anaconda

**Anaconda** √® uma distribui√ß√£o livre e aberta de v√°rias linguagens, entre elas *Python* e *R*, utilizada na ci√™ncia de dados e bioinform√°tica. As diferentes vers√µes dos programas se administram mediante um sistema de gest√£o chamado *conda*, o qual faz bastante simples instalar, executar e atualizar programas. 

As instru√ß√µes de instala√ß√£o de conda est√£o [aqui](https://conda.io/projects/conda/en/latest/user-guide/install/index.html#regular-installation)

---
## Anaconda

* Ferrmentas de bioinform√°tica escritas em diferentes linguagens e/ou vers√µes.

* Sistema operacional com uma vers√£o s√≥

* Problema na instala√ß√£o de programas.

* Com Anaconda podem ser criados v√°rios ambientes virtuais com diferentes linguagens e vers√µes

---
## Anaconda

Alguns comando do `conda` s√£o:

.orange[BASH]
.code-bg-gray[.can-edit[
```
$ conda create -n meuambiente # cria um ambiente chamado meuambiente
$ conda activate meuambiente # ativa o ambiente meuambiente
$ conda env list # lista todos os ambientes criados
$ conda list # executado dentro de um ambiente, lista as ferramentas instaladas nesse ambiente
```
]]

* Durante o processamento de gen√¥mica e metagen√¥mica em linha de comando usaremos conda.

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
